<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title></title>

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Golos+Text:wght@400..900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Tenor+Sans&display=swap" rel="stylesheet">
	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

	<link href="/assets/styles/styles.css" rel="stylesheet">
	<link href="/assets/styles/about.css" rel="stylesheet">
</head>
<body id="app">
	<div class="wrapper">
		<header class="header header--shadow">
			<div class="content">
				<div class="header__logo logo">
					<img src="/public/images/logo.png" />
				</div>
				<menu class="header__menu">
					<div class="menu__item">
						<a href="/rooms.html">Номера</a>
					</div>
					<div class="menu__item">
						<a href="/conference_rooms.html">Конференц-залы</a>
					</div>
					<div class="menu__item">
						<a href="/pool_gym.html">Бассейн и спортзал</a>
					</div>
					<div class="menu__item menu__item--more">
						Еще
						<div class="menu__item-sub">
							<div class="menu__item-sub-item"><a href="">Новости</a></div>
							<div class="menu__item-sub-item"><a href="">О нас</a></div>
							<div class="menu__item-sub-item"><a href="">Парк Краснодар</a></div>
						</div>
					</div>
				</menu>
				<div class="header__contacts">
					<div class="contacts_tel">8 (861) 274-11-55</div>
					<div class="contacts_address">г. Краснодар, ул. Васнецова, 14</div>
				</div>
				<div class="header__burger" @click="toggleMenu"></div>
			</div>
		</header>
		<menu class="mobile" v-if="mobileMenu">
			<div class="menu__close" @click="toggleMenu"></div>
			<div class="menu__logo">
				<img src="/public/images/logo.png" />
			</div>
			<div class="menu__contacts">
				<div class="contacts__tel">8 (861) 274-11-55</div>
				<div class="contacts__address">г. Краснодар, ул. Васнецова, 14</div>
			</div>
			<div class="menu__items">
				<div class="menu__item"><a href="/rooms.html">Номера</a></div>
				<div class="menu__item"><a href="/conference_rooms.html">Конференц-залы</a></div>
				<div class="menu__item"><a href="/pool_gym.html">Бассейн и спортзал</a></div>
				<div class="menu__item"><a href="/restaurant.html">Завтрак и рестораны</a></div>
				<div class="menu__item"><a href="/events.html">События</a></div>
				<div class="menu__item"><a href="/about.html">О нас</a></div>
				<div class="menu__item"><a href="/park.html">Парк Краснодар</a></div>
			</div>
		</menu>

		<main class="main">
			<div class="content">
				<div class="breadcrumbs">
					<div class="breadcrumbs__item"><a href="#">Главная</a></div>
					<div class="breadcrumbs__item">О нас</div>
				</div>
				<div class="about__caption">
					<div class="about__caption-cover">
						<img src="/public/images/about-cover.jpg" />
					</div>
					<div class="about__caption-text">
						<h1>Комфорт и уют в нашем отеле</h1>
						<p>
							Мы готовы обеспечить Вас комфортабельными номерами.
							Ведь именно о комфорте задумываются люди при бронировании гостиниц.
						</p>
						<p>
							Отправляясь в деловую поездку или увлекательное туристическое приключение,
							в Отеле Премьер Вы сможете расслабиться после насыщенного яркими событиями дня.
						</p>
					</div>
				</div>
				<div class="about__info">
					<div class="about__info-item">
						<div class="about__info-item-text about__info-item-text--loc">г. Краснодар, ул. Васнецова, 14</div>
					</div>
					<div class="about__info-item">
						<div class="about__info-item-text about__info-item-text--tel">+7 (861) 274-11-55</div>
					</div>
					<div class="about__info-item">
						<div class="about__info-item-text about__info-item-text--email"><a href="mailto:info@hotelpremier.ru">info@hotelpremier.ru</a></div>
					</div>
				</div>
				<div class="about__map">
					<img src="/public/images/map-large.jpg" />
				</div>
			</div>
			<div class="reviews">
				<div class="content">
					<div class="reviews__heading">
						<h1>Отзывы о нас</h1>
						<div class="reviews__button" @click="openModal()">Добавить отзыв</div>
					</div>
				</div>
				<div
					class="reviews__items"
					:class="{'reviews__items--one': reviews.length === 1}"
				>
					<div
							class="reviews__item"
							v-for="review in reviews.data" :key="review.id"
						>
							<div class="reviews__item-heading">
								<div class="reviews__item-author">{{ review.author }}</div>
								<div class="reviews__item-rating">
									<span
										v-for="idx in 5"
										:class="{'d': idx > review.rating}"
									></span>
								</div>
							</div>
							<div class="reviews__item-text">{{ review.text }}</div>
						</div>
				</div>
			</div>
			<div class="content">
				<div class="banner">
					<div class="banner__content">
						<div class="banner__title">Получите максимум удовольствия</div>
						<div class="banner__text">Забронируйте номер в нашем отеле и пользуйтесь всеми услугами, включенными в проживание</div>
						<div class="banner__button">Выбрать номер</div>
					</div>
					<div class="banner__image">
						<img src="/public/images/banner2.jpg" />
					</div>
				</div>
			</div>
		</main>

		<div class="modal" v-if="reviewModal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-close" @click="hideModal()"></div>
					<template v-if="reviewAddSuccess">
						<div class="modal-title">Спасибо!</div>
						<div class="modal-text">Ваш отзыв успешно добавлен</div>
						<div class="modal-button modal-button--outline">На главную</div>
					</template>
					<template v-else>
						<div class="modal-title">Оставить отзыв</div>
						<div class="modal-rating">
							<span
								v-for="idx in 5"
								:class="{'active': idx <= ratingLevel || (reviewForm.rating && idx <= reviewForm.rating)}"
								@mouseover="highlightRating(idx)"
								@mouseleave="highlightRating(0)"
								@click="setRating(idx)"
							></span>
						</div>
						<div class="modal-form">
						<div class="modal-form__row">
							<input
								type="text"
								class="modal-input"
								placeholder="Ваше имя"
								v-model="reviewForm.author"
							/>
						</div>
						<div class="modal-form__row">
							<textarea
								class="modal-textarea"
								placeholder="Поделитесь своими впечатлениями"
								v-model="reviewForm.text"
							></textarea>
						</div>
						<div class="modal-form__row"></div>
						<div class="modal-form__row">
							<div class="modal-button" @click="addReview()">Добавить отзыв</div>
						</div>
					</div>
					</template>
				</div>
			</div>
		</div>

		<div class="before-footer"></div>
		<footer class="footer">
			<div class="content">
				<div class="footer__col">
					<div class="footer__logo logo">
						<img src="/public/images/logo.png" />
					</div>
					<div class="footer__address">
						г. Краснодар,<br />ул. Васнецова, 14
					</div>
				</div>
				<div class="footer__col">
					<menu class="footer__menu">
						<div class="menu__item">
							<a href="/rooms.html">Номера</a>
						</div>
						<div class="menu__item">
							<a href="/conference_rooms.html">Конференц-залы</a>
						</div>
						<div class="menu__item">
							<a href="/pool_gym.html">Бассейн и спортзал</a>
						</div>
						<div class="menu__item">
							<a href="/restaurant.html">Завтрак и рестораны</a>
						</div>
					</menu>
				</div>
				<div class="footer__col">
					<menu class="footer__menu">
						<div class="menu__item">
							<a href="/about.html">О нас</a>
						</div>
						<div class="menu__item">
							<a href="/park.html">Парк "Краснодар"</a>
						</div>
					</menu>
				</div>
				<div class="footer__col">
					<div class="footer__socials">
						<div class="socials__tel">8 (861) 274-11-55</div>
						<div class="socials__vk"></div>
						<div class="socials__ok"></div>
					</div>
					<div class="footer__links">
						<div class="links__item">
							<a href="#">Политика конфиденциальности</a>
						</div>
						<div class="links__item">
							<a href="#">Правила проживания</a>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>
	<script>
		const { createApp, ref, onMounted } = Vue

		const mobileMenu = ref(false)
		const reviewModal = ref(false)
		const reviewForm = ref({
			author: '',
			text: '',
			rating: 0
		})
		const ratingLevel = ref(0)
		const reviews = ref([])
		const reviewAddSuccess = ref(false)

		const toggleMenu = () => {
			mobileMenu.value = !mobileMenu.value
		}
		const openModal = () => {
			reviewAddSuccess.value = false
			reviewModal.value = true
		}
		const hideModal = () => {
			reviewModal.value = false
		}
		const addReview = async () => {
			try {
				const formData = new FormData()
				formData.append('author', reviewForm.value.author)
				formData.append('text', reviewForm.value.text)
				formData.append('rating', reviewForm.value.rating)
				const response = await fetch('http://vladim0u.beget.tech/api/reviews/add', {
					method: 'post',
					body: formData
				})
				reviewAddSuccess.value = true
			} catch (error) {}
		}
		const highlightRating = (index) => {
			ratingLevel.value = index
		}
		const setRating = (value) => {
			reviewForm.value.rating = value
		}
		const fetchReviews = async () => {
			try {
				const response = await fetch('http://vladim0u.beget.tech/api/reviews')
				if (!response.ok) {
					throw new Error(`Response status: ${response.status}`)
				}

				reviews.value = await response.json()
			} catch (error) {
				console.error(error.message)
			}
		}

		createApp({
			setup() {
				onMounted(() => {
					fetchReviews()
				})

				return { fetchReviews, reviews, mobileMenu, toggleMenu, reviewModal, reviewAddSuccess, openModal, hideModal, reviewForm, addReview, ratingLevel, highlightRating, setRating }
			}
		}).mount('#app')
	</script>
</body>
</html>
